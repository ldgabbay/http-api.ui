<div ng-switch="vm.appState" ng-class="{'noselect': vm.noselect}">

    <div ng-switch-when="loading" class="loading-container">
        <div class="table">
            <div class="table-cell">
                <img src="assets/img/loader.svg" alt="Loading..." />
            </div>
        </div><!-- .table -->
    </div><!-- .loading-container -->

    <div ng-switch-when="loaded" class="api-container">
        <div hapi-sidebar hapi-scope-vm="vm" />
        <div ng-switch="vm.contentState" class="content">

            <div ng-switch-when="original">
                <div class="content-header1" ng-attr-id="{{['api'] | escapeID}}">API</div>
                <div ng-repeat="section in vm.ooSpec.sections" hapi-section hapi-scope-section="section"></div>
                <div class="content-header1" ng-attr-id="{{['schema'] | escapeID}}">Schemas</div>
                <div ng-repeat-start="type in vm.schemaTypes" class="content-header2" ng-attr-id="{{['schema', type] | escapeID}}" ng-bind="type"></div>
                <div ng-repeat-end class="schema-container" ng-repeat="tag in vm.ooSpec.schemaTags[type]" ng-init="show = false; schema = vm.ooSpec.schemas[type][tag]">
                    <span ng-class="{'header-expanded': show, 'header-collapsed': !show}" ng-click="show = !show" ng-attr-id="{{['schema', type, tag] | escapeID}}" ng-bind="tag"></span>
                    <div ng-if="show">
                        <span ng-init="showInner = true">
                            <div hapi-schema-short hapi-scope-model="schema" hapi-scope-show="showInner"></div>
                            <div hapi-schema-extended hapi-scope-model="schema" hapi-scope-show="showInner"></div>
                        </span>
                    </div>
                </div>
            </div>


            <div ng-switch-when="api">
                <div class="content-header1">API</div>
                <div ng-repeat="section in vm.ooSpec.sections" hapi-section hapi-scope-section="section"></div>
            </div>


            <div ng-switch-when="api-section">
                <div hapi-section hapi-scope-section="vm.content.section"></div>
            </div>


            <div ng-switch-when="api-method">
                <div hapi-method hapi-scope-section="vm.content.section" hapi-scope-method="vm.content.method" hapi-scope-collapsible="false"/>
            </div>


            <div ng-switch-when="schemas">
                <div class="content-header1">Schemas</div>
                <div ng-repeat-start="type in vm.schemaTypes" class="content-header2" ng-bind="type"></div>
                <div ng-repeat-end class="schema-container" ng-repeat="tag in vm.ooSpec.schemaTags[type]" ng-init="show = false; schema = vm.ooSpec.schemas[type][tag]">
                    <span ng-class="{'header-expanded': show, 'header-collapsed': !show}" ng-click="show = !show" ng-bind="tag"></span>
                    <div ng-if="show">
                        <span ng-init="showInner = true">
                            <div hapi-schema-short hapi-scope-model="schema" hapi-scope-show="showInner"></div>
                            <div hapi-schema-extended hapi-scope-model="schema" hapi-scope-show="showInner"></div>
                        </span>
                    </div>
                </div>
            </div>


            <div ng-switch-when="schemas-group">
                <div class="content-header2" ng-bind="vm.content.schemaGroup"></div>
                <div ng-repeat-end class="schema-container" ng-repeat="tag in vm.ooSpec.schemaTags[vm.content.schemaGroup]" ng-init="show = false; schema = vm.ooSpec.schemas[vm.content.schemaGroup][tag]">
                    <span ng-class="{'header-expanded': show, 'header-collapsed': !show}" ng-click="show = !show" ng-bind="tag"></span>
                    <div ng-if="show">
                        <span ng-init="showInner = true">
                            <div hapi-schema-short hapi-scope-model="schema" hapi-scope-show="showInner"></div>
                            <div hapi-schema-extended hapi-scope-model="schema" hapi-scope-show="showInner"></div>
                        </span>
                    </div>
                </div>
            </div>


            <div ng-switch-when="schemas-schema">
                <div class="schema-container">
                    <span class="header-expanded" ng-bind="vm.content.schemaTag"></span>
                    <div>
                        <span>
                            <div hapi-schema-short hapi-scope-model="vm.content.schema" hapi-scope-show="true"></div>
                            <div hapi-schema-extended hapi-scope-model="vm.content.schema" hapi-scope-show="true"></div>
                        </span>
                    </div>
                </div>
            </div>

        </div><!-- .content -->
    </div><!-- .api-container -->

    <div ng-switch-when="error" class="error-container">
        <div class="error-message" ng-bind="vm.errorMessage"></div>
        <div class="error-details" ng-bind="vm.errorDetails"></div>
    </div><!-- .error-container -->

</div>
